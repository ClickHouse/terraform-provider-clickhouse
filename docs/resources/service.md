---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "clickhouse_service Resource - clickhouse"
subcategory: ""
description: |-
  You can use the clickhouse_service resource to deploy ClickHouse cloud instances on supported cloud providers.
---

# clickhouse_service (Resource)

You can use the *clickhouse_service* resource to deploy ClickHouse cloud instances on supported cloud providers.

## Example Usage

```terraform
resource "clickhouse_service" "service" {
  name           = "My Service"
  cloud_provider = "aws"
  region         = "us-east-1"
  tier           = "production"
  idle_scaling   = true

  ip_access = [
    {
      source      = "192.168.2.63"
      description = "Test IP"
    }
  ]

  min_total_memory_gb  = 24
  max_total_memory_gb  = 360
  idle_timeout_minutes = 5

  password_hash  = "n4bQgYhMfWWaL+qgxVrQFaO/TxsrC4Is0V1sFbDwCgg=" # base64 encoded sha256 hash of "test"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cloud_provider` (String) Cloud provider ('aws', 'gcp', or 'azure') in which the service is deployed in.
- `ip_access` (Attributes List) List of IP addresses allowed to access the service. (see [below for nested schema](#nestedatt--ip_access))
- `name` (String) User defined identifier for the service.
- `region` (String) Region within the cloud provider in which the service is deployed in.
- `tier` (String) Tier of the service: 'development', 'production'. Production services scale, Development are fixed size.

### Optional

- `double_sha1_password_hash` (String, Sensitive) Double SHA1 hash of password for connecting with the MySQL protocol. Cannot be specified if `password` is specified.
- `encryption_assumed_role_identifier` (String) Custom role identifier arn
- `encryption_key` (String) Custom encryption key arn
- `idle_scaling` (Boolean) When set to true the service is allowed to scale down to zero when idle.
- `idle_timeout_minutes` (Number) Set minimum idling timeout (in minutes). Must be greater than or equal to 5 minutes. Must be set if idle_scaling is enabled
- `max_replica_memory_gb` (Number) Maximum memory of a single replica during auto-scaling in Gb. Available only for 'production' services. Must be a multiple of 8. max_replica_memory_gb x num_replicas (default 3) must be lower than 360 for non paid services or 720 for paid services.
- `max_total_memory_gb` (Number, Deprecated) Maximum total memory of all workers during auto-scaling in Gb. Available only for 'production' services. Must be a multiple of 12 and lower than 360 for non paid services or 720 for paid services.
- `min_replica_memory_gb` (Number) Minimum memory of a singe replica during auto-scaling in Gb. Available only for 'production' services. Must be a multiple of 8. min_replica_memory_gb x num_replicas (default 3) must be lower than 360 for non paid services or 720 for paid services.
- `min_total_memory_gb` (Number, Deprecated) Minimum total memory of all workers during auto-scaling in Gb. Available only for 'production' services. Must be a multiple of 12 and greater than 24.
- `num_replicas` (Number) Number of replicas for the service. Available only for 'production' services. Must be between 3 and 20. Contact support to enable this feature.
- `password` (String, Sensitive) Password for the default user. One of either `password` or `password_hash` must be specified.
- `password_hash` (String, Sensitive) SHA256 hash of password for the default user. One of either `password` or `password_hash` must be specified.

### Read-Only

- `endpoints` (Attributes List) List of public endpoints. (see [below for nested schema](#nestedatt--endpoints))
- `iam_role` (String) IAM role used for accessing objects in s3.
- `id` (String) ID of the created service. Generated by ClickHouse Cloud.
- `private_endpoint_config` (Attributes, Deprecated) Service config for private endpoints (see [below for nested schema](#nestedatt--private_endpoint_config))

<a id="nestedatt--ip_access"></a>
### Nested Schema for `ip_access`

Required:

- `source` (String) IP address allowed to access the service. In case you want to set the ip_access to anywhere you should set source to 0.0.0.0/0

Optional:

- `description` (String) Description of the IP address.


<a id="nestedatt--endpoints"></a>
### Nested Schema for `endpoints`

Read-Only:

- `host` (String) Endpoint host.
- `port` (Number) Endpoint port.
- `protocol` (String) Endpoint protocol: https or nativesecure


<a id="nestedatt--private_endpoint_config"></a>
### Nested Schema for `private_endpoint_config`

Read-Only:

- `endpoint_service_id` (String) Unique identifier of the interface endpoint you created in your VPC with the AWS(Service Name) or GCP(Target Service) resource
- `private_dns_hostname` (String) Private DNS Hostname of the VPC you created

## Import

Import is supported using the following syntax:

```shell
# Services can be imported by specifying the UUID.
terraform import clickhouse_service.example xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
```
