---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "clickhouse_clickpipe Resource - clickhouse"
subcategory: ""
description: |-
  The ClickPipe resource allows you to create and manage ClickPipes data ingestion in ClickHouse Cloud.
---

# clickhouse_clickpipe (Resource)

The ClickPipe resource allows you to create and manage ClickPipes data ingestion in ClickHouse Cloud.

## Example Usage

```terraform
resource "clickhouse_clickpipe" "kafka_clickpipe" {
  name           = "My Kafka ClickPipe"
  description    = "Data pipeline from Kafka to ClickHouse"

  service_id     = "e9465b4b-f7e5-4937-8e21-8d508b02843d"

  replicas {
    desired = 1
  }

  state = "Running"

  source {
    kafka {
      type = "confluent"
      brokers = "my-kafka-broker:9092"
      topics = "my_topic"

      consumer_group = "clickpipe-test"

      credentials {
        username = "user"
        password = "***"
      }
    }

    schema {
      format = "JSONEachRow"
    }
  }

  destination {
    table    = "my_table"
    managed_table = true

    columns {
      name = "my_field1"
      type = "String"
    }

    columns {
      name = "my_field2"
      type = "UInt64"
    }
  }

  field_mappings = [
    {
      source_field = "my_field"
      destination_field = "my_field1"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `destination` (Attributes) The destination for the ClickPipe. (see [below for nested schema](#nestedatt--destination))
- `name` (String) The name of the ClickPipe.
- `service_id` (String) The ID of the service to which the ClickPipe belongs.
- `source` (Attributes) The data source for the ClickPipe. (see [below for nested schema](#nestedatt--source))

### Optional

- `description` (String) The description of the ClickPipe.
- `field_mappings` (Attributes List) Field mapping between source and destination table. (see [below for nested schema](#nestedatt--field_mappings))
- `replicas` (Attributes) (see [below for nested schema](#nestedatt--replicas))
- `state` (String) The state of the ClickPipe. (`Running`, `Stopped`). Defaults to `Running`. Whenever the pipe state changes, the Terraform provider will try to ensure the actual state matches the planned value. If pipe is `Failed` and plan is `Running`, the provider will try to resume the pipe. If plan is `Stopped`, the provider will try to stop the pipe.

### Read-Only

- `id` (String) The ID of the ClickPipe. Generated by the ClickHouse Cloud.

<a id="nestedatt--destination"></a>
### Nested Schema for `destination`

Required:

- `columns` (Attributes List) The list of columns for the ClickHouse table. (see [below for nested schema](#nestedatt--destination--columns))
- `table` (String) The name of the ClickHouse table.

Optional:

- `database` (String) The name of the ClickHouse database. Defaults to 'default'.
- `managed_table` (Boolean) Whether the table is managed by ClickHouse Cloud. If false, the table must exist in the database. Defaults to true.

<a id="nestedatt--destination--columns"></a>
### Nested Schema for `destination.columns`

Required:

- `name` (String) The name of the column.
- `type` (String) The type of the column.



<a id="nestedatt--source"></a>
### Nested Schema for `source`

Required:

- `schema` (Attributes) (see [below for nested schema](#nestedatt--source--schema))

Optional:

- `kafka` (Attributes) (see [below for nested schema](#nestedatt--source--kafka))

<a id="nestedatt--source--schema"></a>
### Nested Schema for `source.schema`

Required:

- `format` (String) The format of the schema. (JSONEachRow, Avro)


<a id="nestedatt--source--kafka"></a>
### Nested Schema for `source.kafka`

Required:

- `brokers` (String) The list of Kafka bootstrap brokers. (comma separated)
- `credentials` (Attributes) (see [below for nested schema](#nestedatt--source--kafka--credentials))
- `topics` (String) The list of Kafka topics. (comma separated)

Optional:

- `authentication` (String) The authentication method for the Kafka source. (PLAIN, SCRAM-SHA-256, SCRAM-SHA-512). Defaults to PLAIN.
- `consumer_group` (String) The Kafka consumer group. Defaults to 'clickpipes-<ID>'.
- `type` (String) The type of the Kafka source. (kafka, msk, confluent). Defaults to 'kafka'.

<a id="nestedatt--source--kafka--credentials"></a>
### Nested Schema for `source.kafka.credentials`

Required:

- `password` (String, Sensitive) The password for the Kafka source.
- `username` (String, Sensitive) The username for the Kafka source.




<a id="nestedatt--field_mappings"></a>
### Nested Schema for `field_mappings`

Required:

- `destination_field` (String) The name of the column in destination table.
- `source_field` (String) The name of the source field.


<a id="nestedatt--replicas"></a>
### Nested Schema for `replicas`

Optional:

- `desired` (Number) The number of replicas desired for the ClickPipe. (1-10). Defaults to 1.
